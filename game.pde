
PImage[] fragment;
PImage m;
int n=10;
var mapHeight;
var mapWidth;
var cam;
var p;
var barMap=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
            [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0]
            ];
var tMap = [[176,177,176,177,176,177,176,177,176,177,176,177,176,177,176,177,176,177,176,177,176,177,176,177],
            [184,185,184,185,184,185,184,185,184,185,184,185,184,185,184,185,184,185,184,185,184,185,184,185],
            [176,177,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,176,177],
            [184,185,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,184,185],
            [176,177,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,176,177],
            [184,185,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,184,185],
            [176,177,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,176,177],
            [184,185,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,184,185],
            [176,177,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,176,177],
            [184,185,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,184,185],
            [176,177,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,176,177],
            [184,185,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,184,185],
            [462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,462,176,177]
            ];
var ground =[ [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563],
            [563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563,563]
            ];

void setup(){
    size(400,400);
    fragment=new PImage[n];
    for(int i=0;i<fragment.length;i++){
        fragment[i]=loadImage("./pokemon/" + str(i+1) + ".png");
    }
    m=new tilemap();
    mapHeight = ground.length;
    mapWidth = ground[0].length;
    cam = new cameraObj();
    p = new player(100,100);
};

void drawMap(){

    for (var i = 0; i < ground.length; i++) {
        for (var j = 0; j < ground[i].length; j++) {
            m.drawTile(ground[i][j],j*32,i*32);
            m.drawTile(tMap[i][j],j*32,i*32);
        }

    }
};

var keys=[];
void keyPressed(){keys[keyCode] = true; };
void keyReleased() { keys[keyCode] = false; };

void draw(){
    background(100);
    stroke(255);
    drawMap();
    p.display();
    if (keys[68]) {//right
        p.isMoving=1;
        p.m_dir=0;
        
    }
    else if (keys[65]) {//left
        p.isMoving=1;
        p.m_dir=1;
    }
    else if (keys[87]) {//up
        p.isMoving=1;
        p.m_dir=2;
       
    }
    else if (keys[83]) {//down
        p.isMoving=1;
        p.m_dir=3;
    }
    else{
        p.isMoving=0;
    }

};

